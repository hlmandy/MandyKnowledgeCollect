# 异常

## 目录

-   [创建日志，在控制台和日志文件中同时输出日志：](#创建日志在控制台和日志文件中同时输出日志)

> [https://blog.csdn.net/tutu96177/article/details/89308994](https://blog.csdn.net/tutu96177/article/details/89308994 "https://blog.csdn.net/tutu96177/article/details/89308994")

```python
try:
  my_fun()
except Exception as e:
  print (e)
```

## 创建日志，在控制台和日志文件中同时输出日志：

```python
# encoding = utf-8

import os
import logging
import logging.handlers

class Log(object):
    def __init__(self, log_name):
        log_dir = 'logs'
        os.makedirs(log_dir, exist_ok=True)
        self._log_dir = log_dir
        self._log_name = log_name

    def set_logger(self):
        # 创建一个logger,可以考虑如何将它封装
        logger = logging.getLogger(self._log_name)
        logger.setLevel(logging.DEBUG)
        # 创建一个handler，用于写入日志文件, 存 3 个日志，每个 10M 大小
        fh = logging.handlers.RotatingFileHandler(os.path.join(self._log_dir, self._log_name + '.log'),
                                                  maxBytes=10*1024*1024, backupCount=3)
        fh.setLevel(logging.DEBUG)
        # 再创建一个handler，用于输出到控制台
        ch = logging.StreamHandler()
        ch.setLevel(logging.DEBUG)
        # 定义handler的输出格式
        formatter = logging.Formatter('%(asctime)s - %(module)s.%(funcName)s.%(lineno)d - '
                                      '%(levelname)s - %(message)s')
        fh.setFormatter(formatter)
        ch.setFormatter(formatter)
        # 给logger添加handler
        logger.addHandler(fh)
        logger.addHandler(ch)
        return logger



用法：
# 获取日志配置对象
logger = Log(os.path.basename(__file__)).set_logger()
def get_log_1(b ,logger):
    res_flag = False
    global res
    try:
        a = 10
        res = a/b
        res_flag = True
    except Exception as e:
      # 记录一条错误日志信息，记录抛出的异常
        logger.error(e)
    # 记录一条结果信息日志
    logger.info('res is ' + str(res))
    logger.info('res_flag is ' + str(res_flag))
    logger.warning('1')
    return res, res_flag

```
