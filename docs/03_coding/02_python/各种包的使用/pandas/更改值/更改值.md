# 更改值

## 目录

-   [3.1 改变某一个值](#31-改变某一个值)
-   [3.2 换列名](#32-换列名)
-   [删除一列](#删除一列)
-   [3.3 排序](#33-排序)
-   [日期转换](#日期转换)
-   [列截取部分](#列截取部分)

## 3.1 改变某一个值

例如，对df，找到 key = value的那一行，对那一行的target列进行修改。

首选，需要找到行的index，然后再调用df.loc

```python
row_idx = df[df['key']=="value"].index.tolist()
df.loc[row_idx]['target']=70

tmp_df.loc[tmp_df['AircraftChangeCost'] < 1000, 'AircraftChangeCost'] = util.aft_change_cost

```

## 3.2 换列名

```python
df.rename(columns={"code3": "arr_code3", "code4": "arr_code4"}, inplace=True)
```

## 删除一列

```python
df = df.drop('col',axis=1)
```

## 3.3 排序

```python
df.sort_values('data_month', ascending=True, inplace=False )
```

## 日期转换

```python
df["datetime"]= pd.to_datetime(df['datetime'],errors='coerce')

df["datetime"]= pd.to_datetime(df['datetime'],format="%m/%d/%Y")
## 获取年月日
df['Year'] = df['date'].dt.year 
df['Month'] = df['date'].dt.month 
df['dow'] = df['date'].dt.dayofweek+1

## 日期相减得到秒
(tmp1['deptime_2'] - tmp1['arrtime_1'])/pd.Timedelta(1, 'S')
#得到minutes
(tmp1['deptime_2'] - tmp1['arrtime_1'])/pd.Timedelta(1, 'm')
# 得到hours
(delay_flight_df['Sd'] - delay_flight_df['Td'])/pd.Timedelta(1, 'h')

```

## 列截取部分

```python
flight['fltno'].str[-4:]
```
